    CDN(内容分发网络)，通过将网络内容发布到最靠近用户的边缘节点，使不同地区的用户在访问相同页面，图片或视频时就可以就近获取。

    使用CDN最重要的原因: 加速网站的访问。

    这样能够减轻服务器的负载，也可以减少整个网络中流量分布不均的问题，既能够降低互联网公司的成本(硬件开销，能耗和管理成本)，也能有效改善整个网络的性能。

    所谓“边缘节点”指的是CDN服务商经过精心选择的距离用户距离最近的服务器节点，即在各地均有机房集群分布，变得仅是“一跳”距离（traceroute命令后查看经过路由的个数），也就是说用户在访问时不需要经过多个路由器，可以有效提高访问时间。

    在对某个需要CDN的域名解析时，是由智能CDN负载均衡系统选定的某个边缘节点的IP。用户利用这个IP地址访问边缘节点，然后通过该节点通过其内部DNS解析得到源服务器IP并发出请求来获取用户所需的页面或资源。若请求成功，边缘点会将此资源缓存（cache）下来，下次用户再访问时可以直接读取，而不需要每次都去访问源服务器。


CDN架构:

    可以使用第三方CDN平台，如果有需要也可以自建平台，平台资源用不了再拿出来卖，阿里云等就是这个样子发展的。

    那么我们这次就举例说明淘宝的CDN平台是如何架构的。

    淘宝网的CDN主要用户来支持用户购物，比如双11光棍节，有海量的图片请求。

    它的图片存储于后端的TFS集群中，CDN系统将这些图片缓存到用户最近的边缘节点。

    CDN系统采用2级缓存：L1和L2级缓存。用户在访问淘宝网的图片时，通过全局调度系统调度到某个L1级缓存节点，如果L1缓存命中，那么就直接将图片数据返回给用户；否则，即请求L2级缓存，并将返回的图片数据缓存到L1缓存节点。如果L2缓存节点被命中，直接将图片数据返回给L1级缓存节点。

    如果都没有命中，最后请求源图片服务器集群。此集群为一个个的Nginx的Web 服务器，它也会在本地做图片缓存，当本地缓存不命中再去请求后端的TFS集群。图片服务器集群和TFS集群会同时部署在同一个数据中心内。


